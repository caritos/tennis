appId: com.caritos.tennis
name: "Form Validation E2E Testing - Fixed Text Bleeding"
---

# Test form validation with field clearing to prevent text bleeding

# Launch and navigate to signup form
- launchApp:
    clearState: true
- waitForAnimationToEnd

- tapOn:
    id: "get-started-button"
- waitForAnimationToEnd

- tapOn:
    id: "email-signup-button"
- waitForAnimationToEnd

# Test 1: Submit empty form
- scroll
- tapOn:
    id: "terms-checkbox"
- scroll
- tapOn:
    id: "create-account-button"

# Verify validation errors appear with testIDs
- assertVisible:
    id: "full-name-error"
- assertVisible:
    id: "email-error"
- assertVisible:
    id: "password-error"

- takeScreenshot: validation-errors-empty-form

# Test 2: Invalid email format with field clearing
- tapOn:
    id: "full-name-input"
- inputText: "Test User"

# Clear email field before entering invalid email
- tapOn:
    id: "email-input"
- waitForAnimationToEnd
# Select all text and replace it
- inputText: ""
- waitForAnimationToEnd
- inputText: "invalid-email"
- waitForAnimationToEnd

- scroll
- tapOn:
    id: "create-account-button"

- assertVisible:
    id: "email-error"

- takeScreenshot: validation-errors-invalid-email

# Test 3: Password mismatch with field clearing
# Clear and set valid email
- tapOn:
    id: "email-input"
- waitForAnimationToEnd
- inputText: ""
- waitForAnimationToEnd
- inputText: "valid@example.com"
- waitForAnimationToEnd

- tapOn:
    id: "password-input"
- waitForAnimationToEnd
- inputText: "Password123"
- waitForAnimationToEnd

# Clear confirm password field explicitly
- tapOn:
    id: "confirm-password-input"
- waitForAnimationToEnd
- inputText: ""
- waitForAnimationToEnd
- inputText: "DifferentPassword123"
- waitForAnimationToEnd

- scroll
- tapOn:
    id: "create-account-button"

- assertVisible:
    id: "confirm-password-error"

- takeScreenshot: validation-errors-password-mismatch

# Test 4: Terms not accepted with field clearing
# Fix password mismatch first
- tapOn:
    id: "confirm-password-input"
- waitForAnimationToEnd
- inputText: ""
- waitForAnimationToEnd
- inputText: "Password123"
- waitForAnimationToEnd

# Ensure terms is unchecked
- tapOn:
    id: "terms-checkbox"

- scroll
- tapOn:
    id: "create-account-button"

- assertVisible:
    id: "terms-error"

- takeScreenshot: validation-errors-terms-not-accepted

# Test 5: Successful submission after fixing all issues
- tapOn:
    id: "terms-checkbox"
- scroll
- tapOn:
    id: "create-account-button"

# Should navigate successfully
- assertVisible:
    text: "My Clubs|Profile|Clubs"
    optional: true

- takeScreenshot: successful-signup-after-validation