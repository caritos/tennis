appId: com.anonymous.tennis-club
name: Sign In Flow
env:
  # Use consistent test credentials
  TEST_EMAIL: "testuser123@example.com"
  TEST_PASSWORD: "TestPass123!"
---
# Start fresh
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Handle possible states - if already logged in, sign out first
- tapOn:
    text: "Profile"
    optional: true
- tapOn:
    text: "Sign Out"
    optional: true
- tapOn:
    text: "Sign out"
    optional: true

# Navigate to sign in screen
- tapOn:
    text: "Sign In"
    optional: true
    
- tapOn:
    text: "Sign in"
    optional: true
    
- tapOn:
    text: "Log In"
    optional: true

- tapOn:
    text: "Login"
    optional: true

# Try getting to sign in from sign up screen
- tapOn:
    text: "Get started"
    optional: true
    
- tapOn:
    text: "Already have an account"
    optional: true
    
- tapOn:
    text: "Sign In"
    optional: true

# Fill in email
- tapOn:
    text: "Email"
    optional: true
- tapOn:
    text: "Email Address"
    optional: true
- inputText: "${TEST_EMAIL}"

# Fill in password
- tapOn:
    text: "Password"
- inputText: "${TEST_PASSWORD}"

# Submit sign in
- tapOn:
    text: "Sign In"
    
- tapOn:
    text: "Sign in"
    optional: true
    
- tapOn:
    text: "Login"
    optional: true

# Wait for sign in to complete
- waitForAnimationToEnd
- waitForAnimationToEnd

# Verify successful sign in - should see main app
- assertVisible:
    text: "My Clubs"
    optional: true
    
- assertVisible:
    text: "Clubs"
    optional: true
    
- assertVisible:
    text: "Profile"
    optional: true

# Take screenshot of successful sign in
- takeScreenshot: "signin-success"