appId: host.exp.exponent
name: "Record Match with Unregistered Player - Expo Go Version"
---
# E2E test for recording a match with unregistered player using Expo Go
# This version works with Expo Go app (host.exp.exponent) when connected to your development server

- launchApp
- waitForAnimationToEnd

# Navigate through Expo Go to your project
# Look for your project in recent projects or enter URL
- assertVisible:
    text: "Recently opened|Enter URL manually"
    optional: true

# Tap on your tennis project if it appears
- tapOn:
    text: ".*tennis.*|.*Tennis.*|localhost.*8081"
    index: 0
    optional: true
- waitForAnimationToEnd:
    timeout: 10000

# If need to enter URL manually
- tapOn:
    text: "Enter URL manually"
    optional: true
- inputText: "exp://localhost:19000"
    optional: true
- tapOn:
    text: "Connect"
    optional: true
- waitForAnimationToEnd:
    timeout: 15000

# Wait for your app to load
- assertVisible:
    text: "My Clubs|Sign In|Get Started|Tennis Club"
    timeout: 20000

# Take screenshot of app loaded
- takeScreenshot: app-loaded-in-expo

# Now proceed with the match recording test
- tapOn:
    text: "My Clubs"
    optional: true
- waitForAnimationToEnd

# Select a club
- tapOn:
    text: ".*Tennis.*|.*Club.*"
    index: 0
    optional: true
- waitForAnimationToEnd

# Navigate to match recording
- assertVisible: 
    text: "Record Match"
    optional: true
- tapOn: "Record Match"
- waitForAnimationToEnd
- takeScreenshot: match-form-opened

# Select singles match
- tapOn: "Singles"
- waitForAnimationToEnd

# Add unregistered opponent
- tapOn:
    text: "Select Opponent"
    optional: true
- tapOn:
    id: "opponent-search-input"
    optional: true
- waitForAnimationToEnd

# Enter opponent name
- inputText: "Alex Rodriguez"
- waitForAnimationToEnd

# Add as unregistered player
- assertVisible:
    text: "Add Alex Rodriguez as unregistered player"
    optional: true
- tapOn:
    text: "Add Alex Rodriguez as unregistered player"
    optional: true
- waitForAnimationToEnd
- takeScreenshot: unregistered-opponent-added

# Enter match scores
- tapOn:
    id: "player-score-input-0"
    optional: true
- inputText: "6"
- tapOn:
    id: "opponent-score-input-0"
    optional: true
- inputText: "2"
- waitForAnimationToEnd

- tapOn:
    id: "player-score-input-1"
    optional: true
- inputText: "6"
- tapOn:
    id: "opponent-score-input-1"
    optional: true  
- inputText: "4"
- waitForAnimationToEnd
- takeScreenshot: scores-entered

# Save the match
- tapOn: "Save Match"
- waitForAnimationToEnd:
    timeout: 10000

# Verify success
- assertVisible:
    text: "Recent Matches|Club Rankings"
    optional: true
- assertVisible:
    text: "Alex Rodriguez"
    optional: true
- takeScreenshot: match-saved-success